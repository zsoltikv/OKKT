<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OKKT25.PastTripsPage"
             Title="Korábbi kirándulások"
             BackgroundColor="#121212">

    <VerticalStackLayout Padding="20" Spacing="10">

        <!-- Fejléc -->
        <Label Text="📂 Mentett kirándulások" 
               FontSize="24" 
               FontAttributes="Bold"
               TextColor="#FFD700"
               Margin="0,10,0,20"/>

        <!-- Kirándulások listája -->
        <CollectionView x:Name="TripsCollectionView"
                        SelectionMode="Single">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="10"/>
                <!-- ✅ spacing -->
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="12"
                           HasShadow="True"
                           BackgroundColor="#1E1E1E"
                           BorderColor="#3C3C3C"
                           Padding="15"
                           Margin="0">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer 
                                Command="{Binding Source={x:Reference TripsCollectionView}, Path=BindingContext.TripTappedCommand}" 
                                CommandParameter="{Binding}" />
                        </Frame.GestureRecognizers>

                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="4">
                                <Label Text="{Binding TripName}" FontSize="18" FontAttributes="Bold" TextColor="#FFD700"/>
                                <Label Text="{Binding TripDestination, StringFormat='📍 Úticél: {0}'}" FontSize="14" TextColor="#FFFFFF"/>
                                <Label Text="{Binding TripDateStart, StringFormat='🗓 Indulás: {0:yyyy.MM.dd}'}" FontSize="13" TextColor="#C8C8C8"/>
                                <Label Text="{Binding TripDateEnd, StringFormat='🏁 Vége: {0:yyyy.MM.dd}'}" FontSize="13" TextColor="#C8C8C8"/>
                                <Label Text="{Binding LastSaved, StringFormat='💾 Mentve: {0:yyyy.MM.dd HH:mm}'}" FontSize="12" TextColor="#C8C8C8"/>
                                <Label Text="{Binding Participants, StringFormat='👥 Résztvevők: {0} fő'}" FontSize="12" TextColor="#FF9800"/>
                            </VerticalStackLayout>

                            <Label Text="›" FontSize="30" FontAttributes="Bold"
                                   TextColor="#FFD700"
                                   VerticalOptions="Center"
                                   HorizontalOptions="End"
                                   Grid.Column="1"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Üres állapot -->
        <Label x:Name="EmptyStateLabel"
               Text="Még nincsenek mentett kirándulások 📭"
               FontSize="16"
               TextColor="#C8C8C8"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               Margin="0,50,0,0"
               IsVisible="False"/>

    </VerticalStackLayout>
</ContentPage>